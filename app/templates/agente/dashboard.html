{% extends 'shared/base.html' %}

{% block title %}Dashboard - Agente{% endblock %}

{% block nav_extra %}
<span class="navbar-text">Dashboard do Agente</span>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Dashboard do Agente</h2>
    <a href="/" class="btn btn-outline-secondary">‚Üê Voltar ao In√≠cio</a>
</div>

<!-- Cards de M√©tricas Principais -->
<div class="row mb-4">
    <div class="col-md-2">
        <div class="card bg-primary text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h3 class="mb-1">{{ metricas.total_pesquisas }}</h3>
                        <p class="mb-0">Total de Pesquisas</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fa fa-clipboard fa-2x" style="opacity: 0.7;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-2">
        <div class="card bg-success text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h3 class="mb-1">{{ metricas.pesquisas_respondidas }}</h3>
                        <p class="mb-0">Respondidas</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fa fa-check fa-2x" style="opacity: 0.7;"></i>
                    </div>
                </div>
                <div class="mt-2">
                    <small style="font-size: 10px; opacity: 0.8;">{{ metricas.taxa_resposta }}% taxa</small>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-2">
        <div class="card bg-warning text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h3 class="mb-1">{{ metricas.pesquisas_pendentes }}</h3>
                        <p class="mb-0">Pendentes</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fa fa-clock fa-2x" style="opacity: 0.7;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- NOVO KPI: FEEDBACK POSITIVO -->
    <div class="col-md-2">
        <div class="card bg-info text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h3 class="mb-1">{{ metricas.feedback_positivo }}</h3>
                        <p class="mb-0">Feedback Positivo</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fa fa-thumbs-up fa-2x" style="opacity: 0.7;"></i>
                    </div>
                </div>
                <div class="mt-2">
                    <small style="font-size: 10px; opacity: 0.8;">{{ metricas.percentual_positivo }}% do total</small>
                </div>
            </div>
        </div>
    </div>
    
    <!-- NOVO KPI: FEEDBACK NEGATIVO -->
    <div class="col-md-2">
        <div class="card {% if metricas.percentual_negativo > 20 %}bg-danger{% elif metricas.percentual_negativo > 10 %}bg-warning{% else %}bg-secondary{% endif %} text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h3 class="mb-1">{{ metricas.feedback_negativo }}</h3>
                        <p class="mb-0">Feedback Negativo</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fa fa-thumbs-down fa-2x" style="opacity: 0.7;"></i>
                    </div>
                </div>
                <div class="mt-2">
                    <small style="font-size: 10px; opacity: 0.8;">{{ metricas.percentual_negativo }}% do total</small>
                </div>
            </div>
        </div>
    </div>
    
    <!-- NOVO KPI: √çNDICE DE SATISFA√á√ÉO -->
    <div class="col-md-2">
        <div class="card 
            {% if metricas.percentual_negativo <= 5 %}bg-success
            {% elif metricas.percentual_negativo <= 15 %}bg-warning
            {% else %}bg-danger{% endif %} text-white">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        {% set satisfacao = 100 - metricas.percentual_negativo %}
                        <h3 class="mb-1">{{ satisfacao }}%</h3>
                        <p class="mb-0">√çndice de Satisfa√ß√£o</p>
                    </div>
                    <div class="align-self-center">
                        <i class="fa fa-star fa-2x" style="opacity: 0.7;"></i>
                    </div>
                </div>
                <div class="mt-2">
                    <small style="font-size: 10px; opacity: 0.8;">
                        {% if satisfacao >= 95 %}‚≠ê Excelente
                        {% elif satisfacao >= 85 %}üëç Bom
                        {% elif satisfacao >= 70 %}‚ö†Ô∏è Regular
                        {% else %}üö® Cr√≠tico{% endif %}
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- NOVO: Se√ß√£o de An√°lise de Feedback -->
<div class="row mb-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">üìä An√°lise de Feedback por Produto</h5>
            </div>
            <div class="card-body">
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th>Produto</th>
                            <th>Total</th>
                            <th>Respondidas</th>
                            <th>Taxa</th>
                            <th>Positivos</th>
                            <th>Negativos</th>
                            <th>% Negativo</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for produto in metricas.por_produto %}
                        <tr>
                            <td><strong>{{ produto.nome }}</strong></td>
                            <td>{{ produto.total or 0 }}</td>
                            <td>{{ produto.respondidas or 0 }}</td>
                            <td>
                                <span class="badge bg-{% if (produto.taxa or 0) >= 70 %}success{% elif (produto.taxa or 0) >= 50 %}warning{% else %}danger{% endif %}">
                                    {{ produto.taxa or 0 }}%
                                </span>
                            </td>
                            <td>
                                <span class="badge bg-success">{{ produto.positivos or 0 }}</span>
                            </td>
                            <td>
                                <span class="badge bg-danger">{{ produto.negativos or 0 }}</span>
                            </td>
                            <td>
                                <span class="badge bg-{% if (produto.percentual_negativo_produto or 0) <= 10 %}success{% elif (produto.percentual_negativo_produto or 0) <= 20 %}warning{% else %}danger{% endif %}">
                                    {{ produto.percentual_negativo_produto or 0 }}%
                                </span>
                            </td>
                            <td>
                                {% if produto.percentual_negativo_produto <= 10 %}
                                    <span class="text-success">‚úÖ Excelente</span>
                                {% elif produto.percentual_negativo_produto <= 20 %}
                                    <span class="text-warning">‚ö†Ô∏è Aten√ß√£o</span>
                                {% else %}
                                    <span class="text-danger">üö® Cr√≠tico</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">‚ö†Ô∏è Alertas Pessoais</h5>
            </div>
            <div class="card-body">
                {% if metricas.alertas %}
                    {% for alerta in metricas.alertas %}
                    <div class="alert alert-{{ alerta.tipo }} alert-sm mb-2">
                        <small><strong>{{ alerta.titulo }}</strong><br>
                        {{ alerta.mensagem }}</small>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="text-center text-success">
                        <h6>üéâ Parab√©ns!</h6>
                        <p class="mb-0">Seu desempenho est√° excelente!</p>
                        <small>Nenhum alerta no momento</small>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Evolu√ß√£o Temporal com Feedback -->
<div class="row mb-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">üìà Evolu√ß√£o do Feedback</h5>
            </div>
            <div class="card-body">
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th>Per√≠odo</th>
                            <th>Criadas</th>
                            <th>Respondidas</th>
                            <th>Feedback Negativo</th>
                            <th>% Negativo</th>
                            <th>Tend√™ncia</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Esta semana</strong></td>
                            <td>{{ metricas.esta_semana.criadas or 0 }}</td>
                            <td>{{ metricas.esta_semana.respondidas or 0 }}</td>
                            <td>{{ metricas.esta_semana.negativos or 0 }}</td>
                            <td>
                                <span class="badge bg-{% if metricas.esta_semana.percentual_negativo_semana <= 10 %}success{% elif metricas.esta_semana.percentual_negativo_semana <= 20 %}warning{% else %}danger{% endif %}">
                                    {{ metricas.esta_semana.percentual_negativo_semana or 0 }}%
                                </span>
                            </td>
                            <td>
                                {% if metricas.esta_semana.percentual_negativo_semana and metricas.semana_passada.percentual_negativo_semana %}
                                    {% if metricas.esta_semana.percentual_negativo_semana < metricas.semana_passada.percentual_negativo_semana %}
                                        <span class="text-success">üìà Melhorou</span>
                                    {% elif metricas.esta_semana.percentual_negativo_semana > metricas.semana_passada.percentual_negativo_semana %}
                                        <span class="text-danger">üìâ Piorou</span>
                                    {% else %}
                                        <span class="text-muted">‚û°Ô∏è Est√°vel</span>
                                    {% endif %}
                                {% else %}
                                    <span class="text-muted">-</span>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>Semana passada</td>
                            <td>{{ metricas.semana_passada.criadas or 0 }}</td>
                            <td>{{ metricas.semana_passada.respondidas or 0 }}</td>
                            <td>{{ metricas.semana_passada.negativos or 0 }}</td>
                            <td>
                                <span class="badge bg-secondary">
                                    {{ metricas.semana_passada.percentual_negativo_semana or 0 }}%
                                </span>
                            </td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><strong>Este m√™s</strong></td>
                            <td>{{ metricas.este_mes.criadas or 0 }}</td>
                            <td>{{ metricas.este_mes.respondidas or 0 }}</td>
                            <td>{{ metricas.este_mes.negativos or 0 }}</td>
                            <td>
                                <span class="badge bg-info">
                                    {{ metricas.este_mes.percentual_negativo_semana or 0 }}%
                                </span>
                            </td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- A√ß√£o Principal -->
<div class="row mb-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body text-center">
                <h5 class="card-title">Gerar Nova Pesquisa</h5>
                <p class="card-text">Crie um link √∫nico para enviar ao cliente</p>
                <a href="/agente/gerar-link" class="btn btn-primary btn-lg">
                    ‚ûï Gerar Link de Pesquisa
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card bg-light">
            <div class="card-body">
                <h6>üí° Dicas para Melhorar o Feedback</h6>
                <ul class="mb-0 small">
                    <li>üéØ Seja claro nas explica√ß√µes</li>
                    <li>ü§ù Mantenha contato pr√≥ximo</li>
                    <li>üìû Fa√ßa follow-up ap√≥s treinamento</li>
                    <li>üí¨ Pe√ßa feedback durante o processo</li>
                    <li>üîÑ Adapte-se √†s necessidades do cliente</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- √öltimas Pesquisas com Status de Feedback -->
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0">üìã Suas Pesquisas - P√°gina {{ pagination.page }}</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Cliente</th>
                                <th>Servi√ßo</th>
                                <th>Produto</th>
                                <th>Status</th>
                                <th>Feedback</th>
                                <th>Criado em</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for pesquisa in ultimas_pesquisas %}
                            <tr {% if pesquisa.sentimento == 'negative' %}class="table-warning"{% endif %}>
                                <td>
                                    <strong>{{ pesquisa.nome_cliente }}</strong><br>
                                    <small class="text-muted">{{ pesquisa.codigo_cliente }}</small>
                                </td>
                                <td>{{ pesquisa.nome_treinamento }}</td>
                                <td>{{ pesquisa.tipo_produto }}</td>
                                <td>
                                    {% if pesquisa.status_pesquisa == 'respondida' %}
                                        <span class="badge bg-success">Respondida</span>
                                    {% elif pesquisa.status_pesquisa == 'ativa' %}
                                        <span class="badge bg-warning">Ativa</span>
                                    {% else %}
                                        <span class="badge bg-danger">Expirada</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if pesquisa.sentimento == 'positive' %}
                                        <span class="badge bg-success">üòä Positivo</span>
                                    {% elif pesquisa.sentimento == 'negative' %}
                                        <span class="badge bg-danger">üòû Negativo</span>
                                        {% if pesquisa.motivo_insatisfacao %}
                                            <br><small class="text-danger" title="{{ pesquisa.motivo_insatisfacao }}">
                                                {{ pesquisa.motivo_insatisfacao[:50] }}{% if pesquisa.motivo_insatisfacao|length > 50 %}...{% endif %}
                                            </small>
                                        {% endif %}
                                    {% elif pesquisa.sentimento == 'neutral' %}
                                        <span class="badge bg-secondary">üòê Neutro</span>
                                    {% elif pesquisa.respondida %}
                                        <span class="badge bg-info">üîÑ Analisando</span>
                                    {% else %}
                                        <span class="text-muted">-</span>
                                    {% endif %}
                                </td>
                                <td>{{ pesquisa.created_at.strftime('%d/%m/%Y') }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!-- COMPONENTE DE PAGINA√á√ÉO PARA AGENTE -->
                <div class="row mt-3">
                    <div class="col-md-12">
                        <!-- Informa√ß√µes e seletor de itens por p√°gina -->
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div class="d-flex align-items-center gap-3">
                                <!-- Indicador de resultados -->
                                <span class="text-muted" style="font-size: 13px;">
                                    Mostrando {{ pagination.start_item }}-{{ pagination.end_item }} de {{ pagination.total_items }} pesquisas
                                </span>
                                
                                <!-- Seletor de itens por p√°gina (adaptado para agente) -->
                                <div class="d-flex align-items-center gap-2">
                                    <label for="perPage" class="form-label mb-0 text-muted" style="font-size: 12px;">
                                        Itens por p√°gina:
                                    </label>
                                    <select class="form-select form-select-sm" id="perPage" style="width: auto;" onchange="alterarItensPorPagina(this.value)">
                                        <option value="5" {% if pagination.per_page == 5 %}selected{% endif %}>5</option>
                                        <option value="10" {% if pagination.per_page == 10 %}selected{% endif %}>10</option>
                                        <option value="20" {% if pagination.per_page == 20 %}selected{% endif %}>20</option>
                                        <option value="50" {% if pagination.per_page == 50 %}selected{% endif %}>50</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Navega√ß√£o de p√°ginas -->
                            {% if pagination.total_pages > 1 %}
                            <nav aria-label="Navega√ß√£o de p√°ginas">
                                <ul class="pagination pagination-sm mb-0">
                                    <!-- Bot√£o Anterior -->
                                    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
                                        {% if pagination.has_prev %}
                                            <a class="page-link" href="{{ url_for('agente.dashboard', 
                                                page=pagination.prev_page,
                                                per_page=pagination.per_page
                                            ) }}">
                                                ‚Üê Anterior
                                            </a>
                                        {% else %}
                                            <span class="page-link">‚Üê Anterior</span>
                                        {% endif %}
                                    </li>
                                    
                                    <!-- N√∫meros das p√°ginas -->
                                    {% set start_page = [1, pagination.page - 2]|max %}
                                    {% set end_page = [pagination.total_pages, pagination.page + 2]|min %}
                                    
                                    <!-- Primeira p√°gina (se n√£o estiver no range) -->
                                    {% if start_page > 1 %}
                                        <li class="page-item">
                                            <a class="page-link" href="{{ url_for('agente.dashboard', 
                                                page=1,
                                                per_page=pagination.per_page
                                            ) }}">1</a>
                                        </li>
                                        {% if start_page > 2 %}
                                            <li class="page-item disabled">
                                                <span class="page-link">...</span>
                                            </li>
                                        {% endif %}
                                    {% endif %}
                                    
                                    <!-- P√°ginas do range -->
                                    {% for page_num in range(start_page, end_page + 1) %}
                                        <li class="page-item {% if page_num == pagination.page %}active{% endif %}">
                                            {% if page_num == pagination.page %}
                                                <span class="page-link">{{ page_num }}</span>
                                            {% else %}
                                                <a class="page-link" href="{{ url_for('agente.dashboard', 
                                                    page=page_num,
                                                    per_page=pagination.per_page
                                                ) }}">{{ page_num }}</a>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                    
                                    <!-- √öltima p√°gina (se n√£o estiver no range) -->
                                    {% if end_page < pagination.total_pages %}
                                        {% if end_page < pagination.total_pages - 1 %}
                                            <li class="page-item disabled">
                                                <span class="page-link">...</span>
                                            </li>
                                        {% endif %}
                                        <li class="page-item">
                                            <a class="page-link" href="{{ url_for('agente.dashboard', 
                                                page=pagination.total_pages,
                                                per_page=pagination.per_page
                                            ) }}">{{ pagination.total_pages }}</a>
                                        </li>
                                    {% endif %}
                                    
                                    <!-- Bot√£o Pr√≥ximo -->
                                    <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
                                        {% if pagination.has_next %}
                                            <a class="page-link" href="{{ url_for('agente.dashboard', 
                                                page=pagination.next_page,
                                                per_page=pagination.per_page
                                            ) }}">
                                                Pr√≥ximo ‚Üí
                                            </a>
                                        {% else %}
                                            <span class="page-link">Pr√≥ximo ‚Üí</span>
                                        {% endif %}
                                    </li>
                                </ul>
                            </nav>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- NOVO: Se√ß√£o de Recomenda√ß√µes Baseadas no Desempenho -->
{% if metricas.percentual_negativo > 15 %}
<div class="row mt-4">
    <div class="col-md-12">
        <div class="alert alert-warning">
            <h5 class="alert-heading">üìö Plano de Melhoria Sugerido</h5>
            <p>Com base no seu percentual de feedback negativo ({{ metricas.percentual_negativo }}%), sugerimos:</p>
            <hr>
            <div class="row">
                <div class="col-md-6">
                    <h6>üéØ A√ß√µes Imediatas:</h6>
                    <ul>
                        <li>Entre em contato com clientes insatisfeitos</li>
                        <li>Solicite feedback detalhado sobre pontos de melhoria</li>
                        <li>Revise o material de treinamento</li>
                        <li>Adapte a metodologia conforme necess√°rio</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h6>üîÑ Melhorias Cont√≠nuas:</h6>
                    <ul>
                        <li>Fa√ßa check-ins durante os treinamentos</li>
                        <li>Prepare exemplos mais pr√°ticos</li>
                        <li>Solicite mentoria com gestores</li>
                        <li>Participe de treinamentos de capacita√ß√£o</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% elif metricas.percentual_negativo == 0 and metricas.pesquisas_respondidas > 5 %}
<div class="row mt-4">
    <div class="col-md-12">
        <div class="alert alert-success">
            <h5 class="alert-heading">üèÜ Excelente Desempenho!</h5>
            <p>Parab√©ns! Voc√™ est√° com 0% de feedback negativo em {{ metricas.pesquisas_respondidas }} pesquisas respondidas.</p>
            <hr>
            <p class="mb-0">Continue assim! Voc√™ √© um exemplo para a equipe. üåü</p>
        </div>
    </div>
</div>
{% endif %}

<style>
/* Estilos espec√≠ficos para o dashboard do agente */
.card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.table-warning {
    background-color: rgba(255, 193, 7, 0.1) !important;
}

.badge {
    font-size: 11px;
    font-weight: 500;
}

.alert-sm {
    padding: 8px 12px;
    margin-bottom: 8px;
}

.alert-sm small {
    font-size: 11px;
}

/* Anima√ß√£o para cards de feedback negativo */
.bg-danger {
    animation: pulse-red 3s infinite;
}

@keyframes pulse-red {
    0% { 
        box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4);
    }
    70% { 
        box-shadow: 0 0 0 10px rgba(220, 53, 69, 0);
    }
    100% { 
        box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
    }
}
</style>

<script>
// JavaScript espec√≠fico para o dashboard do agente
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ Dashboard do Agente carregado!');
    
    // Destacar m√©tricas importantes
    const percentualNegativo = {{ metricas.percentual_negativo }};
    
    if (percentualNegativo > 20) {
        console.log('üö® Alto percentual de feedback negativo detectado:', percentualNegativo + '%');
    } else if (percentualNegativo === 0) {
        console.log('üèÜ Excelente! Nenhum feedback negativo!');
    }
    
    // Tooltip para motivos de insatisfa√ß√£o
    const tooltips = document.querySelectorAll('[title]');
    tooltips.forEach(element => {
        element.style.cursor = 'help';
    });
});

// Fun√ß√£o para focar em melhoria
function verDicasMelhoria() {
    const percentualNegativo = {{ metricas.percentual_negativo }};
    
    if (percentualNegativo > 15) {
        alert('üìö Dicas de Melhoria:\n\n' +
              '1. Entre em contato com clientes insatisfeitos\n' +
              '2. Solicite feedback espec√≠fico\n' +
              '3. Revise metodologia de treinamento\n' +
              '4. Busque mentoria com gestores\n' +
              '5. Adapte exemplos √†s necessidades do cliente');
    } else {
        alert('üéâ Parab√©ns! Seu desempenho est√° excelente!\n\n' +
              'Continue assim e mantenha o foco na qualidade dos treinamentos.');
    }
}

// Fun√ß√£o para alterar n√∫mero de itens por p√°gina (agente)
function alterarItensPorPagina(novoPerPage) {
    console.log('üìÑ Agente - Alterando itens por p√°gina para:', novoPerPage);
    
    // Para agente, n√£o h√° filtros complexos, apenas page e per_page
    const params = new URLSearchParams();
    params.set('per_page', novoPerPage);
    params.set('page', '1'); // Voltar para primeira p√°gina
    
    // Redirecionar com novos par√¢metros
    window.location.href = window.location.pathname + '?' + params.toString();
}

// Debug espec√≠fico do agente
document.addEventListener('DOMContentLoaded', function() {
    console.log('üìÑ Sistema de pagina√ß√£o do agente carregado!');
    console.log('üìä P√°gina atual:', {{ pagination.page if pagination else 'N/A' }});
    console.log('üìä Total de p√°ginas:', {{ pagination.total_pages if pagination else 'N/A' }});
    console.log('üìä Total de pesquisas do agente:', {{ pagination.total_items if pagination else 'N/A' }});
});

</script>

{% endblock %}

{% block scripts %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}